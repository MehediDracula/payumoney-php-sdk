<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>PayUMoney PHP Library by niranjan94</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">PayUMoney PHP Library</h1>
        <p class="header"></p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/niranjan94/payumoney-php/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/niranjan94/payumoney-php/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/niranjan94/payumoney-php">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/niranjan94">niranjan94</a></p>


      </header>
      <section>
        <h1>
<a id="payumoney-api-for-php" class="anchor" href="#payumoney-api-for-php" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>PayUMoney API for PHP</h1>

<p>Simple library for accepting payments via <a href="https://www.payumoney.com/">PayUMoney</a>.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>To add this library to your project, simply add a dependency on <code>niranjan94/payumoney</code> to your project's <code>composer.json</code> file. Here is a minimal example of a composer.json file:</p>

<pre><code>{
    "require": {
        "niranjan94/payumoney": "1.*"
    }
}
</code></pre>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>You'll find a minimal usage example below.</p>

<h3>
<a id="initialize-purchase" class="anchor" href="#initialize-purchase" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Initialize purchase</h3>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// purchase.php</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">CodeZero\PayUMoney\PayUMoney</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>vendor/autoload.php<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$payumoney</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">PayUMoney</span>(<span class="pl-c1">array</span>(</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>merchantId<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>YOUR_MERCHANT_ID<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>secretKey<span class="pl-pds">'</span></span>  <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>YOUR_SECRET_KEY<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>testMode<span class="pl-pds">'</span></span>   <span class="pl-k">=&gt;</span> <span class="pl-c1">true</span></span>
<span class="pl-s1">));</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// All of these parameters are required!</span></span>
<span class="pl-s1"><span class="pl-smi">$params</span> <span class="pl-k">=</span> [</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>txnid<span class="pl-pds">'</span></span>       <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>A_UNIQUE_TRANSACTION_ID<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>amount<span class="pl-pds">'</span></span>      <span class="pl-k">=&gt;</span> <span class="pl-c1">10.50</span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>productinfo<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>A book<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>firstname<span class="pl-pds">'</span></span>   <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>Peter<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>email<span class="pl-pds">'</span></span>       <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>abc@example.com<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>phone<span class="pl-pds">'</span></span>       <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>1234567890<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>surl<span class="pl-pds">'</span></span>        <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>http://localhost/payumoney-php/return.php<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>furl<span class="pl-pds">'</span></span>        <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>http://localhost/payumoney-php/return.php<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">];</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// Redirects to PayUMoney</span></span>
<span class="pl-s1"><span class="pl-smi">$client</span><span class="pl-k">-&gt;</span>initializePurchase(<span class="pl-smi">$params</span>)<span class="pl-k">-&gt;</span>send();</span></pre></div>

<h3>
<a id="finalize-purchase" class="anchor" href="#finalize-purchase" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Finalize purchase</h3>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// return.php</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">CodeZero\PayUMoney\PayUMoney</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>vendor/autoload.php<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$payumoney</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">PayUMoney</span>([</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>merchantId<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>YOUR_MERCHANT_ID<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>secretKey<span class="pl-pds">'</span></span>  <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>YOUR_SECRET_KEY<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>testMode<span class="pl-pds">'</span></span>   <span class="pl-k">=&gt;</span> <span class="pl-c1">true</span></span>
<span class="pl-s1">]);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$result</span> <span class="pl-k">=</span> <span class="pl-smi">$payumoney</span><span class="pl-k">-&gt;</span>completePurchase(<span class="pl-smi">$_POST</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-smi">$result</span><span class="pl-k">-&gt;</span>checksumIsValid() <span class="pl-k">&amp;&amp;</span> <span class="pl-smi">$result</span><span class="pl-k">-&gt;</span>getStatus() <span class="pl-k">===</span> <span class="pl-c1">PayUMoney</span><span class="pl-k">::</span><span class="pl-c1">STATUS_COMPLETED</span>) {</span>
<span class="pl-s1">  <span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">'</span>Payment was successful.<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">} <span class="pl-k">else</span> {</span>
<span class="pl-s1">  <span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">'</span>Payment was not successful.<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">}</span></pre></div>

<p>The <code>PurchaseResult</code> has a few more methods that might be useful:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$result</span> <span class="pl-k">=</span> <span class="pl-smi">$payumoney</span><span class="pl-k">-&gt;</span>completePurchase(<span class="pl-smi">$_POST</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// Returns Complete, Pending, Failed or Tampered</span></span>
<span class="pl-s1"><span class="pl-smi">$result</span><span class="pl-k">-&gt;</span>getStatus(); </span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// Returns an array of all the parameters of the transaction</span></span>
<span class="pl-s1"><span class="pl-smi">$result</span><span class="pl-k">-&gt;</span>getParams();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// Returns the ID of the transaction</span></span>
<span class="pl-s1"><span class="pl-smi">$result</span><span class="pl-k">-&gt;</span>getTransactionId();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// Returns true if the checksum is correct</span></span>
<span class="pl-s1"><span class="pl-smi">$result</span><span class="pl-k">-&gt;</span>checksumIsValid();</span></pre></div>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
